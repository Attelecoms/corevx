function UpdateSalePriceForexValue(n,t){var i=parseFloat(n),r=isNaN(i)?"0.00":(Math.ceil(i*100/t)/100).toFixed(2);$("#forex-price").text(r);isNaN(i)?$("#forex-conversion").hide():$("#forex-conversion").show()}function LoadProducts(n){var t=$("#product_id");t.find("option").remove();$.each(window.products,function(){this.productgroup_id==n&&t.append("<option value='"+this.id+"'>"+this.name+"<\/option>")})}$(function(){$("#terms").change(function(){$("#cmdProceed, #cmdCheckAccount").prop("disabled",!$(this).is(":checked")||telone_submitted)}).trigger("change");$("#telone-services").submit(function(){var u,f,e,s;if(telone_submitted)return!1;var t="",n=null,i=parseInt($("#productgroup_id option:selected").val()),o=parseInt($("#productgroup_id option:selected").val()),r=parseFloat($("#saleprice").val()),h=$("#customer_account_id").val();if(h.length<5&&(t+="- Please enter a valid TelOne number\n",n||(n=$("#customer_account_id"))),i==1?(isNaN(r)||r<telone_minpurchase||r>telone_maxpurchase)&&(t+="- Your topup amount must be between $"+telone_minpurchase.toFixed(2)+" and $"+telone_maxpurchase.toFixed(2)+"\n",n||(n=$("#saleprice"))):(i==2||i==5)&&(isNaN(o)||o==0)&&(t+="- You must select a TelOne product to continue\n",n||(n=$("#product_id"))),u=$("#mobile").val(),u.length!=0&&/^(\+\d{1,3}|0)?(\d{9})$/.test(u)||(t+="Enter a valid mobile number where your payment details will be sent\n",n||(n=$("#mobile"))),f=$("#email").val(),f.length==0||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(f)||(t+="- You must enter a valid e-mail address\n",n||(n=$("#email"))),$("#email_invoice").is(":checked")&&($("#inv_name").val().length==0||$("#inv_address").val().length==0)&&(t+="- If you'd like us to e-mail you a fiscal tax invoice, enter an individual/company name and address\n",n||(n=$("#inv_name"))),t.length>0)return alert(t),n&&n.focus(),!1;e=!1;s=!($("#express").length===0||$("#express").val().length===0);try{e=window.self!==window.top}catch(c){}if(e&&!s){alert("We're going to open up a link to Paynow for you to make payment in a new tab once you click 'OK'");$("#telone-services").attr("target","_blank");return}$("#cmdProceed").prop("disabled",!0).text("Please wait...");$(".cancel-button, #cmdCheckAccount, .expresscheckout").hide();telone_submitted=!0});$("#productgroup_id").change(function(){var n=parseInt($("option:selected",this).val());switch(n){case 1:$(".telephone, .direct, .town").show();$(".vouchers, .lte-message").hide();break;case 2:LoadProducts(n);$(".vouchers, .telephone, .lte-message").hide();$(".direct, .town").show();break;case 3:case 4:$(".telephone, .direct, .lte-message").hide();$(".vouchers").show();break;case 5:LoadProducts(n);$(".vouchers, .telephone, .town").hide();$(".direct, .lte-message").show()}}).trigger("change")})