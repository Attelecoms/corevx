function UpdateAirtimeForexValue(n,t){var i=parseFloat(n),r=isNaN(i)?"0.00":(Math.ceil(i*100/t)/100).toFixed(2);$("#forex-price").text(r);isNaN(i)?$("#forex-conversion").hide():$("#forex-conversion").show()}function FilterBundles(n,t){var i=$("input[name=bundletype]:checked").val();$.each(t.find("option"),function(t,r){var u=$(r),f=u.data("prefixes").split(",");u.prop("disabled",n&&f.indexOf(n)===-1||i&&u.text().toLowerCase().indexOf(i)===-1)});t.find("option[disabled]:selected").length&&(t[0].selectedIndex=-1,t.trigger("change"))}var mobileRecipientNetworkPrefix=null;$(function(){var t=$("#recipient").val(),i,n;t&&(i=/(\+263|0)(\d{2})\d{7}/g,n=i.exec(t),n&&(mobileRecipientNetworkPrefix="+263"+n[2]));$("input[name=type_id]:checked").val()==1&&mobileRecipientNetworkPrefix||$("#databundlecode").length>0&&($("#databundlecode")[0].selectedIndex=-1);FilterBundles(mobileRecipientNetworkPrefix,$("#databundlecode"));$("#terms").change(function(){$("#cmdProceed").prop("disabled",!$(this).is(":checked")||mobile_submitted)}).trigger("change");$("input[name=type_id]").change(function(){var n=$("input[name=type_id]:checked").val();$(".type-option").hide();$(".type"+n).show();$("#amount").val("").prop("required",n==0).prop("min",n==0?mobile_minpurchase:0).prop("max",n==0?mobile_maxpurchase:!1);$("#databundlecode").prop("required",n==1)}).trigger("change");$("#databundlecode").change(function(){var n=parseFloat($("option:selected",this).data("price")),t=this.selectedIndex==-1?"":$(this).find("option:selected").data("description");$("#amount").val(isNaN(n)?"":n.toFixed(2));$("#databundle-description").text(t)}).trigger("change");$("input[name=bundletype]").change(function(){FilterBundles(mobileRecipientNetworkPrefix,$("#databundlecode"))});$("#recipient").change(function(){var i=$("#recipient").val().replace(/\s/g,"");$("#recipient").val(i);var n=/(\+263|0)(\d{2})\d{7}/g.exec(this.value),t=$("#databundlecode");n&&(mobileRecipientNetworkPrefix="+263"+n[2],FilterBundles(mobileRecipientNetworkPrefix,t),t.find("option:not([disabled])").length==0?$("#alert-no-bundles").show():$("#alert-no-bundles").hide())}).trigger("change");$("#mobile-recharge").submit(function(){var e,r,u,f,o;if(mobile_submitted)return!1;var t="",n=null,i=parseFloat($("#amount").val()),s=$("input[name=type_id]:checked").val();if(s==1?$("#databundlecode").val()||(t+="You have chosen to purchase a data bundle, but have not selected which bundle you would like\n",n=$("#databundlecode")):(isNaN(i)||i<mobile_minpurchase||i>mobile_maxpurchase)&&(t+="Your topup amount must be between $"+mobile_minpurchase.toFixed(2)+" and $"+mobile_maxpurchase.toFixed(2)+"\n",n=$("#amount")),e=$("#recipient").val(),/(\+263|0)\d{9}/.test(e)||(t+="Enter a valid recipient mobile number\n",n||(n=$("#recipient"))),r=$("#mobile").val(),r.length!=0&&/^(\+\d{1,3}|0)?(\d{9})$/.test(r)||(t+="Enter a valid mobile number where your payment details will be sent\n",n||(n=$("#mobile"))),u=$("#email").val(),u.length==0||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(u)||(t+="You must enter a valid e-mail address\n",n||(n=$("#email"))),$("#email_invoice").is(":checked")&&($("#inv_name").val().length==0||$("#inv_address").val().length==0)&&(t+="If you'd like us to e-mail you a fiscal tax invoice, enter an invoice name and address\n",n||(n=$("#inv_name"))),t.length>0)return alert(t),n&&n.focus(),!1;f=!1;o=!($("#express").length===0||$("#express").val().length===0);try{f=window.self!==window.top}catch(e){}if(f&&!o){alert("We're going to open up a link to Paynow for you to make payment in a new tab once you click 'OK'");$("#mobile-recharge").attr("target","_blank");return}$(".cancel-button, .expresscheckout").hide();$("#cmdProceed").prop("disabled",!0).text("Please wait...");mobile_submitted=!0})})